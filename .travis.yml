language: node_js
node_js:
  - node
addons:
  sonarcloud:
    organization: "fedn20" # the key of the org you chose at step #3
    token:
      secure: "bEVmXcHlAmTr3MYHoHKkbHhHAH6nBqT0u3diVdPjZRHYCGHy4xMqFlN2Qoo6bNaCTkRXdwgd66qnikdxSxqJFGnVbr7Bxb/dyQY3xbE2ZvFtkVcsSSpnUGV7eAS3FPvwMwFqiaEMkFxt7mVu7gzZcS6ohP1sZ/paJDMMLuWlX9oLHCsGF21HukPDQ7jI6x/TfjVPDea3/v4POMuGULqODtodjNSuuTMjjdyHgNSr23JO3kKuhoKUxPGF1qX3jZeMMbyOVCv7sfu+yVzXdpzPbrS6MOJlfVoWz2Gwbeg910MSzF8EkwBJUIwHpUVcjHHlCAPDryLFX6aVJ+lGf1zq2Cu89taa4dAJw7H41m8W8RgXYg4NO0aT2lCcMk4GlyshsX8CcdK+PPmDa2LWbxKYExsWBBcS7xG9SLPGuAJu1EIPksy2Km6jo9gEMcHEKyDEYoiHRPZ+kHsPi2D99TTD77eXcq6HS/n1kEILgYMT/GccmjhX0bv+WW/+9cS03GALFoWrTNu213q7wz3dnHR2iordNYcoqLTDXSQBLEwdDiNl2k3/s74+Q4lCi194vxcTk87fP+IlYbW37a2gl0PcFrhydCRGV+WIvNNIySNbJQIqsKdcQ7nEmO8+yPwXeD+sjSb147xCeL4H6OyemF+u/eyM2aYKz03hyL0fU6aVdYs="
script:
  # other script steps might be done before running the actual analysis
  - yarn coverage
  - yarn report-coverage
  - sonar-scanner
  - yarn build

deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN # Set in the settings page of your repository, as a secure variable
  keep_history: true
  on:
    branch: main

cache:
  directories:
    - node_modules
