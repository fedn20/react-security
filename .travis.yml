language: node_js
node_js:
  - node
addons:
  sonarcloud:
    organization: "react-dev" # the key of the org you chose at step #3
    token:
      secure: "Wp97QtSmT6OS4yip0GlnRNxkOCApMtJ0QruCm7QfiF/wmfThvi/s1TvpZ5nScXmYzPm0kmEy83Ax39vX3MmbooAinWQqsQJjd8sO+zarNwbS9ma+UdTLdpdUavADFn8oztVCiZ5jIRgQ9P34JEB6tDbD2fRBidNI4fexJ2S0CttyXdFp5PSk+Y4bk4bWYOcf2QH5WsO0GvPsEgHPiKPyfM/MrRnArtiJBLBlt1S4chBqH0m+juEAOF02xVzkYO5TsJ706+Eql/yLT+9nnWxWO8BC8eVye0v3TGleu6Xm/JBAgCBcOSy30W99oJjHCWmLWogXDhKfi36HUcWZ4Qr463tOtGWL596jjtP3N0O0m1SCzrmDs+YdxjMfzt1Y0PDDZ2DgJWapgPtBQUSdIr/HrKJpLeL4+eKwFLaK6fyOdztZwcNYJtY8hgM9SDePJaW8RG0s4y121S/gUwTbgSOVi1FTHfgTUmSl0NGIIR6t/M5JuzwzFiEw/5CVnj6DTNa5F4MQ4fcUz1PoLPTHudtzTs6HNv0qqiV+IofkyOtbGqc2NROpwlGuoQ5d6I61yoCcoxQ2r7LSXf82YcVx84zWc9ZrfczJP/qN6gHeMI89pRebcSJXh96h74Zz4suHhmgYqpixo/E2kQtL7px+CQeUoUS2+f7nUrDJLRXZlekRjbU="
script:
  # other script steps might be done before running the actual analysis
  - yarn coverage
  - yarn report-coverage
  - sonar-scanner
  - yarn build

deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN # Set in the settings page of your repository, as a secure variable
  keep_history: true
  on:
    branch: main

cache:
  directories:
    - node_modules
